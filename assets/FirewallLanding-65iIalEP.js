import{r as n,cx as $,av as q,j7 as z,kd as B,ke as G,j as e,af as H,ag as Q,aq as v,dV as K,gL as N,di as U,kf as V,q as _,e as W,u as J,gJ as X,C as Y,E as Z,an as ee,W as ae}from"./index-cVx9Zqte.js";import{L as te}from"./LandingHeader--0FiA91-.js";import{P as le}from"./PaginationFooter-8MfyrbrN.js";import{b as re,T as oe,a as j,c as ie}from"./TableRow-WjckZ-OR.js";import{T as E}from"./TableSortCell-N7Qxf5YK.js";import{u as se}from"./useOrder-iGt70Yxe.js";import{u as ne}from"./usePagination-oVzoT3VV.js";import{C as M}from"./CreateFirewallDrawer-WeFzxuJ-.js";import{y as de,b as ce,R as ue}from"./ResourcesSection-Ho8bmvI2.js";import{F as we}from"./FirewallRow-S6KH86dQ.js";import{T as pe}from"./TableHead-aAnFvqns.js";import"./OrderBy-9siuTGWJ.js";import"./splitAt-OlbwoBj3.js";import"./formik.esm-XrBweJub.js";import"./Drawer-Zv-UzsLT.js";import"./LinodeSelect-MycnhSc0.js";import"./Autocomplete-vchTD_Ph.js";import"./NodeBalancerSelect-OAwV1VhJ.js";import"./formikErrorUtils-k3dWKVdg.js";import"./grants-2yY1GgvJ.js";import"./ListItem-HwDJ8kDZ.js";import"./StatusIcon-d7wUM4gj.js";import"./ActionMenu-LQcZWhDC.js";import"./InlineMenuAction-1MvHCfFL.js";import"./shared-nfxHZAvQ.js";const ge=n.memo(d=>{var i;const{enqueueSnackbar:c}=$(),g=q(),{mode:a,onClose:o,open:u,selectedFirewallId:r,selectedFirewallLabel:m}=d,{data:w}=z(r??-1),{error:t,isLoading:p,mutateAsync:b}=B(r??-1),{error:f,isLoading:C,mutateAsync:h}=G(r??-1),x={delete:()=>h(),disable:()=>b({status:"disabled"}),enable:()=>b({status:"enabled"})},S={delete:C,disable:p,enable:p},F={delete:f,disable:t,enable:t},k=async()=>{await x[a](),a==="delete"&&(w==null||w.forEach(s=>{const y=s.entity.type;g.invalidateQueries([y==="linode"?K:N,y,s.entity.id,"firewalls"])})),c(`Firewall ${m} successfully ${a}d`,{variant:"success"}),o()};return e.jsxs(H,{actions:e.jsx(Q,{primaryButtonProps:{label:`${v(a)} Firewall`,loading:S[a],onClick:k},secondaryButtonProps:{label:"Cancel",onClick:o}}),error:(i=F[a])==null?void 0:i[0].reason,onClose:o,open:u,title:`${v(a)} Firewall ${m}?`,children:["Are you sure you want to ",a," this firewall?"]})}),me={description:"Control network traffic to and from Linode Compute Instances with a simple management interface",subtitle:"Secure cloud-based firewall",title:"Firewalls"},be={links:[{text:"Getting Started with Cloud Firewalls",to:"https://www.linode.com/docs/products/networking/cloud-firewall/get-started/"},{text:"Manage Firewall Rules",to:"https://www.linode.com/docs/products/networking/cloud-firewall/guides/manage-firewall-rules/"},{text:"Comparing Cloud Firewalls to Linux Firewall Software",to:"https://www.linode.com/docs/products/networking/cloud-firewall/guides/comparing-firewalls/"}],moreInfo:{text:"View additional Firewalls guides",to:"https://www.linode.com/docs/products/networking/cloud-firewall/guides/"},title:"Getting Started Guides"},fe={links:[{external:!0,text:"Linode Cloud Firewall Explained | Clear and Intuitive Network Control to and from All your Servers",to:"https://www.youtube.com/watch?v=GsUUtsI_RSA"},{external:!0,text:"Simple Scalable Network Security | Linode Cloud Firewall",to:"https://www.youtube.com/watch?v=H7wM5mDI1-k"}],moreInfo:{text:de,to:ce},title:"Video Playlist"},P={action:"Click:link",category:"Firewall landing page empty"},he=d=>{const{openAddFirewallDrawer:c}=d;return e.jsx(ue,{buttonProps:[{children:"Create Firewall",onClick:()=>{U({action:"Click:button",category:P.category,label:"Create Firewall"}),c()}}],gettingStartedGuidesData:be,headers:me,icon:V,linkAnalyticsEvent:P,youtubeLinkData:fe})},T="firewalls",Fe=()=>{const d=_(),c=W(),g=J(),a=ne(1,T),{handleOrderChange:o,order:u,orderBy:r}=se({order:"asc",orderBy:"label"},`${T}-order`),m={"+order":u,"+order_by":r},w={page:a.page,page_size:a.pageSize},{data:t,error:p,isLoading:b}=X(w,m),f=c.pathname.endsWith("create"),[C,h]=n.useState(!1),[x,S]=n.useState("enable"),[F,k]=n.useState(void 0),i=t==null?void 0:t.data.find(l=>l.id===F),s=(l,R)=>{k(R),S(l),h(!0)},y=l=>{s("delete",l)},A=l=>{s("enable",l)},I=l=>{s("disable",l)},L=()=>{g.replace("/firewalls/create")},D=()=>{g.replace("/firewalls")},O={triggerDeleteFirewall:y,triggerDisableFirewall:I,triggerEnableFirewall:A};return b?e.jsx(Y,{}):(t==null?void 0:t.results)===0?e.jsxs(e.Fragment,{children:[e.jsx(he,{openAddFirewallDrawer:L}),e.jsx(M,{createFlow:void 0,onClose:D,open:f})]}):p?e.jsx(Z,{errorText:ee(p,"Error loading your Firewalls.")[0].reason}):e.jsxs(n.Fragment,{children:[e.jsx(te,{breadcrumbProps:{pathname:"/firewalls"},docsLink:"https://linode.com/docs/platform/cloud-firewall/getting-started-with-cloud-firewall/",entity:"Firewall",onButtonClick:L,title:"Firewalls"}),e.jsxs(re,{"aria-label":"List of services attached to each firewall",children:[e.jsx(pe,{children:e.jsxs(oe,{children:[e.jsx(E,{active:r==="label",direction:u,handleClick:o,label:"label",children:"Label"}),e.jsx(E,{active:r==="status",direction:u,handleClick:o,label:"status",children:"Status"}),e.jsxs(ae,{smDown:!0,children:[e.jsx(j,{children:"Rules"}),e.jsx(j,{children:d.firewallNodebalancer?"Services":"Linodes"})]}),e.jsx(j,{})]})}),e.jsx(ie,{children:t==null?void 0:t.data.map(l=>e.jsx(we,{...l,...O},l.id))})]}),e.jsx(le,{count:(t==null?void 0:t.results)??0,eventCategory:"Firewalls Table",handlePageChange:a.handlePageChange,handleSizeChange:a.handlePageSizeChange,page:a.page,pageSize:a.pageSize}),e.jsx(M,{createFlow:void 0,onClose:D,open:f}),e.jsx(ge,{mode:x,onClose:()=>h(!1),open:C,selectedFirewallId:F,selectedFirewallLabel:(i==null?void 0:i.label)??""})]})},Ne=n.memo(Fe);export{Ne as default};
